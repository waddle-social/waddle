# Issue #62: Open Source

## User Story
As a **developer**, I want to **contribute to Waddle as an open source project** so that **I can help improve the platform and build upon it for my own needs**.

## Description
Prepare Waddle for open source release by implementing proper documentation, contribution guidelines, licensing, community infrastructure, and governance model. This includes creating a welcoming environment for contributors while maintaining code quality and security standards.

## Acceptance Criteria
- [ ] Complete documentation and setup guides
- [ ] Contribution guidelines and code of conduct
- [ ] Proper licensing and legal framework
- [ ] CI/CD pipeline for community contributions
- [ ] Security policies and vulnerability disclosure
- [ ] Community communication channels
- [ ] Governance model and decision process
- [ ] Plugin/extension architecture

## Technical Implementation

### 1. Project Structure and Documentation
```typescript
// Documentation generator for API and components
export class DocumentationGenerator {
  private parser: CodeParser;
  private generator: MarkdownGenerator;
  
  constructor(
    private config: DocConfig,
    private projectRoot: string
  ) {
    this.parser = new CodeParser();
    this.generator = new MarkdownGenerator();
  }
  
  async generateDocs(): Promise<void> {
    console.log('Generating documentation...');
    
    // Generate API documentation
    await this.generateAPIDocs();
    
    // Generate component documentation
    await this.generateComponentDocs();
    
    // Generate architecture documentation
    await this.generateArchitectureDocs();
    
    // Generate deployment guides
    await this.generateDeploymentGuides();
    
    // Generate contribution guides
    await this.generateContributionGuides();
  }
  
  private async generateAPIDocs(): Promise<void> {
    const apiFiles = await this.findAPIFiles();
    const apiDocs: APIDocumentation[] = [];
    
    for (const file of apiFiles) {
      const ast = await this.parser.parseFile(file);
      const endpoints = this.extractEndpoints(ast);
      
      for (const endpoint of endpoints) {
        apiDocs.push({
          path: endpoint.path,
          method: endpoint.method,
          description: endpoint.description,
          parameters: this.extractParameters(endpoint),
          requestBody: this.extractRequestBody(endpoint),
          responses: this.extractResponses(endpoint),
          examples: this.generateExamples(endpoint),
          authentication: endpoint.auth
        });
      }
    }
    
    // Generate OpenAPI spec
    const openApiSpec = this.generateOpenAPISpec(apiDocs);
    await this.writeFile('docs/api/openapi.yaml', openApiSpec);
    
    // Generate markdown docs
    const markdown = this.generator.generateAPIMarkdown(apiDocs);
    await this.writeFile('docs/api/README.md', markdown);
  }
  
  private generateOpenAPISpec(docs: APIDocumentation[]): string {
    const spec = {
      openapi: '3.0.0',
      info: {
        title: 'Waddle API',
        version: '1.0.0',
        description: 'Open source voice and text communication platform',
        license: {
          name: 'MIT',
          url: 'https://opensource.org/licenses/MIT'
        }
      },
      servers: [
        {
          url: 'https://api.waddle.chat',
          description: 'Production server'
        },
        {
          url: 'http://localhost:8787',
          description: 'Local development server'
        }
      ],
      paths: this.generatePaths(docs),
      components: {
        schemas: this.generateSchemas(docs),
        securitySchemes: {
          bearerAuth: {
            type: 'http',
            scheme: 'bearer',
            bearerFormat: 'JWT'
          }
        }
      }
    };
    
    return yaml.stringify(spec);
  }
}

// Project structure for open source
export const PROJECT_STRUCTURE = `
waddle/
â”œâ”€â”€ .github/
â”‚   â”œâ”€â”€ workflows/
â”‚   â”‚   â”œâ”€â”€ ci.yml              # Continuous integration
â”‚   â”‚   â”œâ”€â”€ release.yml         # Release automation
â”‚   â”‚   â””â”€â”€ security.yml        # Security scanning
â”‚   â”œâ”€â”€ ISSUE_TEMPLATE/
â”‚   â”‚   â”œâ”€â”€ bug_report.md
â”‚   â”‚   â”œâ”€â”€ feature_request.md
â”‚   â”‚   â””â”€â”€ documentation.md
â”‚   â”œâ”€â”€ PULL_REQUEST_TEMPLATE.md
â”‚   â”œâ”€â”€ FUNDING.yml
â”‚   â””â”€â”€ dependabot.yml
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web/                    # Web application
â”‚   â”œâ”€â”€ desktop/                # Electron app
â”‚   â””â”€â”€ mobile/                 # React Native app
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ core/                   # Core business logic
â”‚   â”œâ”€â”€ api/                    # API client
â”‚   â”œâ”€â”€ ui/                     # UI components
â”‚   â”œâ”€â”€ rtc/                    # WebRTC logic
â”‚   â””â”€â”€ types/                  # TypeScript types
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ api/                    # API service
â”‚   â”œâ”€â”€ realtime/               # WebSocket service
â”‚   â”œâ”€â”€ media/                  # Media processing
â”‚   â””â”€â”€ notifications/          # Notification service
â”œâ”€â”€ infrastructure/
â”‚   â”œâ”€â”€ terraform/              # Infrastructure as code
â”‚   â”œâ”€â”€ kubernetes/             # K8s manifests
â”‚   â””â”€â”€ docker/                 # Docker configurations
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ getting-started/
â”‚   â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ architecture/
â”‚   â”œâ”€â”€ deployment/
â”‚   â””â”€â”€ contributing/
â”œâ”€â”€ examples/
â”‚   â”œâ”€â”€ basic-chat/
â”‚   â”œâ”€â”€ voice-channel/
â”‚   â”œâ”€â”€ screen-sharing/
â”‚   â””â”€â”€ custom-ui/
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ setup.js                # Initial setup script
â”‚   â”œâ”€â”€ dev.js                  # Development helper
â”‚   â””â”€â”€ release.js              # Release script
â”œâ”€â”€ CONTRIBUTING.md
â”œâ”€â”€ CODE_OF_CONDUCT.md
â”œâ”€â”€ LICENSE
â”œâ”€â”€ README.md
â”œâ”€â”€ SECURITY.md
â””â”€â”€ package.json
`;

// README.md template
export const README_TEMPLATE = `
# Waddle - Open Source Voice & Text Communication Platform

<p align="center">
  <img src="assets/logo.svg" alt="Waddle Logo" width="200" />
</p>

<p align="center">
  <a href="https://github.com/waddle/waddle/actions"><img src="https://github.com/waddle/waddle/workflows/CI/badge.svg" alt="CI Status"></a>
  <a href="https://codecov.io/gh/waddle/waddle"><img src="https://codecov.io/gh/waddle/waddle/branch/main/graph/badge.svg" alt="Code Coverage"></a>
  <a href="https://github.com/waddle/waddle/blob/main/LICENSE"><img src="https://img.shields.io/badge/license-MIT-blue.svg" alt="License"></a>
  <a href="https://discord.gg/waddle"><img src="https://img.shields.io/discord/123456789.svg" alt="Discord"></a>
</p>

## ğŸš€ Features

- **Voice Channels**: Crystal-clear voice communication with noise suppression
- **Text Chat**: Real-time messaging with rich media support
- **Screen Sharing**: Share your screen with automatic quality optimization
- **E2E Encryption**: Optional end-to-end encryption for sensitive communications
- **Cross-Platform**: Works on web, desktop, and mobile devices
- **Self-Hosted**: Deploy on your own infrastructure
- **Extensible**: Plugin architecture for custom features

## ğŸ Quick Start

### Using Docker

\`\`\`bash
docker run -d \\
  -p 8787:8787 \\
  -e DATABASE_URL=your_database_url \\
  --name waddle \\
  waddle/waddle:latest
\`\`\`

### From Source

\`\`\`bash
# Clone the repository
git clone https://github.com/waddle/waddle.git
cd waddle

# Install dependencies
npm install

# Set up environment
cp .env.example .env
# Edit .env with your configuration

# Run development server
npm run dev

# Build for production
npm run build
\`\`\`

## ğŸ“– Documentation

- [Getting Started Guide](docs/getting-started/README.md)
- [API Documentation](docs/api/README.md)
- [Architecture Overview](docs/architecture/README.md)
- [Deployment Guide](docs/deployment/README.md)
- [Contributing Guide](CONTRIBUTING.md)

## ğŸ§ª Examples

Check out the [examples](examples/) directory for sample implementations:

- [Basic Chat Application](examples/basic-chat/)
- [Voice Channel Integration](examples/voice-channel/)
- [Custom UI Theme](examples/custom-ui/)
- [Bot Development](examples/bot-framework/)

## ğŸ¤ Contributing

We welcome contributions! Please see our [Contributing Guide](CONTRIBUTING.md) for details.

### Development Setup

\`\`\`bash
# Fork and clone the repository
git clone https://github.com/your-username/waddle.git
cd waddle

# Install dependencies
npm install

# Run tests
npm test

# Run linting
npm run lint

# Start development server
npm run dev
\`\`\`

## ğŸ”’ Security

Security is a top priority. Please see our [Security Policy](SECURITY.md) for reporting vulnerabilities.

## ğŸ“„ License

Waddle is licensed under the [MIT License](LICENSE).

## ğŸŒŸ Sponsors

<p align="center">
  <a href="https://github.com/sponsors/waddle">
    <img src="https://img.shields.io/badge/Sponsor-GitHub%20Sponsors-pink.svg" alt="Sponsor">
  </a>
</p>

Special thanks to our sponsors who make this project possible!

## ğŸ“Š Stats

![Alt](https://repobeats.axiom.co/api/embed/waddle.svg "Repobeats analytics image")
`;
```

### 2. Contribution Guidelines
```typescript
// CONTRIBUTING.md content
export const CONTRIBUTING_GUIDE = `
# Contributing to Waddle

Thank you for your interest in contributing to Waddle! This document provides guidelines and instructions for contributing.

## ğŸ¤ Code of Conduct

Please read and follow our [Code of Conduct](CODE_OF_CONDUCT.md).

## ğŸ› Reporting Issues

### Bug Reports

Before submitting a bug report:
1. Check existing issues to avoid duplicates
2. Try to reproduce with the latest version
3. Collect relevant information:
   - Version/commit hash
   - Environment details
   - Steps to reproduce
   - Expected vs actual behavior
   - Error messages/logs

### Feature Requests

When proposing new features:
1. Explain the use case
2. Describe the expected behavior
3. Consider implementation complexity
4. Discuss alternatives considered

## ğŸ’» Development Process

### 1. Fork and Clone

\`\`\`bash
# Fork via GitHub UI, then:
git clone https://github.com/your-username/waddle.git
cd waddle
git remote add upstream https://github.com/waddle/waddle.git
\`\`\`

### 2. Create a Branch

\`\`\`bash
git checkout -b feature/your-feature-name
# or
git checkout -b fix/issue-description
\`\`\`

### 3. Make Changes

Follow our coding standards:
- TypeScript for type safety
- ESLint configuration
- Prettier for formatting
- Comprehensive tests
- Clear commit messages

### 4. Test Your Changes

\`\`\`bash
# Run all tests
npm test

# Run specific test suite
npm test -- --testPathPattern=api

# Run tests in watch mode
npm test -- --watch

# Check coverage
npm run test:coverage
\`\`\`

### 5. Commit Guidelines

We follow [Conventional Commits](https://www.conventionalcommits.org/):

\`\`\`
feat: add voice activity detection
fix: resolve websocket reconnection issue
docs: update API documentation
style: format code with prettier
refactor: extract message handling logic
test: add unit tests for auth service
chore: update dependencies
\`\`\`

### 6. Submit Pull Request

1. Push your branch to your fork
2. Create PR via GitHub UI
3. Fill out the PR template
4. Wait for review and address feedback

## ğŸ—ï¸ Architecture Guidelines

### Project Structure

\`\`\`
packages/
â”œâ”€â”€ core/           # Business logic (pure functions)
â”œâ”€â”€ api/            # API client and types
â”œâ”€â”€ ui/             # Reusable UI components
â””â”€â”€ rtc/            # WebRTC abstractions
\`\`\`

### Key Principles

1. **Separation of Concerns**: Keep business logic separate from UI
2. **Type Safety**: Use TypeScript strictly
3. **Testing**: Aim for >80% coverage
4. **Performance**: Profile and optimize critical paths
5. **Accessibility**: Follow WCAG guidelines

### Code Style

\`\`\`typescript
// âœ… Good
export function calculateMessageDelay(
  timestamp: number,
  serverTime: number
): number {
  return Math.max(0, serverTime - timestamp);
}

// âŒ Bad
export function calc(t, s) {
  return s - t;
}
\`\`\`

## ğŸ§ª Testing Guidelines

### Unit Tests

\`\`\`typescript
describe('MessageService', () => {
  it('should encrypt messages when encryption is enabled', async () => {
    const service = new MessageService({ encryption: true });
    const message = { content: 'Hello', channelId: '123' };
    
    const encrypted = await service.send(message);
    
    expect(encrypted.encrypted).toBe(true);
    expect(encrypted.content).not.toBe('Hello');
  });
});
\`\`\`

### Integration Tests

\`\`\`typescript
describe('API Integration', () => {
  it('should handle waddle creation flow', async () => {
    const client = new WaddleClient();
    
    const waddle = await client.createWaddle({
      name: 'Test Waddle',
      isPrivate: true
    });
    
    expect(waddle.id).toBeDefined();
    expect(waddle.inviteCode).toHaveLength(8);
  });
});
\`\`\`

## ğŸ“š Documentation

### Code Documentation

\`\`\`typescript
/**
 * Processes incoming WebRTC statistics and calculates quality metrics
 * 
 * @param stats - RTCStatsReport from peer connection
 * @returns Calculated quality metrics including MOS score
 * 
 * @example
 * const metrics = await processWebRTCStats(pc.getStats());
 * console.log('Audio quality:', metrics.audio.mos);
 */
export async function processWebRTCStats(
  stats: RTCStatsReport
): Promise<QualityMetrics> {
  // Implementation
}
\`\`\`

### API Documentation

Update OpenAPI spec when adding/modifying endpoints:

\`\`\`yaml
paths:
  /api/waddles/{id}/members:
    post:
      summary: Add member to waddle
      operationId: addWaddleMember
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddMemberRequest'
\`\`\`

## ğŸš€ Release Process

1. **Version Bump**: Update version in package.json
2. **Changelog**: Update CHANGELOG.md
3. **Create PR**: Target \`release\` branch
4. **Review**: Requires 2 approvals
5. **Merge**: Triggers automated release

## ğŸ“‹ Checklist

Before submitting your PR, ensure:

- [ ] Tests pass locally
- [ ] Code follows style guidelines
- [ ] Documentation is updated
- [ ] Commit messages follow convention
- [ ] PR description is complete
- [ ] No sensitive data included

## ğŸ™‹ Getting Help

- **Discord**: Join our [community Discord](https://discord.gg/waddle)
- **Discussions**: Use GitHub Discussions for questions
- **Office Hours**: Weekly contributor calls (Thursdays 3pm UTC)

## ğŸ‘¥ Recognition

Contributors are recognized in:
- README.md contributors section
- Release notes
- Annual contributor report

Thank you for contributing to Waddle! ğŸ‰
`;

// Code of Conduct
export const CODE_OF_CONDUCT = `
# Code of Conduct

## Our Pledge

We pledge to make participation in our community a harassment-free experience for everyone.

## Our Standards

### Positive behaviors include:

- Using welcoming and inclusive language
- Being respectful of differing viewpoints
- Gracefully accepting constructive criticism
- Focusing on what is best for the community
- Showing empathy towards other community members

### Unacceptable behaviors include:

- Harassment of any kind
- Discriminatory language or actions
- Publishing others' private information
- Inappropriate sexual attention or advances
- Trolling or insulting/derogatory comments
- Other conduct deemed inappropriate

## Enforcement

### Responsibilities

Project maintainers are responsible for clarifying standards and taking appropriate action in response to unacceptable behavior.

### Scope

This Code of Conduct applies within all project spaces and when representing the project or community.

### Enforcement

Instances of abusive behavior may be reported to: conduct@waddle.chat

All complaints will be reviewed and investigated promptly and fairly.

### Attribution

This Code of Conduct is adapted from the Contributor Covenant, version 2.1.
`;
```

### 3. CI/CD for Open Source
```typescript
// GitHub Actions workflow for CI
export const CI_WORKFLOW = `
name: CI

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Run linting
        run: npm run lint
      
      - name: Check formatting
        run: npm run format:check

  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [16, 18, 20]
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Node.js ${{ matrix.node-version }}
        uses: actions/setup-node@v3
        with:
          node-version: ${{ matrix.node-version }}
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Run tests
        run: npm test -- --coverage
      
      - name: Upload coverage
        uses: codecov/codecov-action@v3
        with:
          token: ${{ secrets.CODECOV_TOKEN }}

  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Build project
        run: npm run build
      
      - name: Upload artifacts
        uses: actions/upload-artifact@v3
        with:
          name: build-artifacts
          path: |
            dist/
            build/

  security:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Run security audit
        run: npm audit --production
      
      - name: Run Snyk scan
        uses: snyk/actions/node@master
        env:
          SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}

  docker:
    runs-on: ubuntu-latest
    if: github.event_name == 'push'
    steps:
      - uses: actions/checkout@v3
      
      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v2
      
      - name: Build Docker image
        uses: docker/build-push-action@v4
        with:
          context: .
          push: false
          tags: waddle/waddle:latest
          cache-from: type=gha
          cache-to: type=gha,mode=max
`;

// Security scanning workflow
export const SECURITY_WORKFLOW = `
name: Security

on:
  schedule:
    - cron: '0 0 * * 1' # Weekly on Monday
  push:
    branches: [main]

jobs:
  dependencies:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Run Dependabot
        uses: dependabot/dependabot-core@v1
      
      - name: Check for known vulnerabilities
        run: |
          npm audit
          npx audit-ci --moderate

  codeql:
    runs-on: ubuntu-latest
    permissions:
      security-events: write
    steps:
      - uses: actions/checkout@v3
      
      - name: Initialize CodeQL
        uses: github/codeql-action/init@v2
        with:
          languages: javascript, typescript
      
      - name: Perform CodeQL Analysis
        uses: github/codeql-action/analyze@v2

  secrets:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Scan for secrets
        uses: trufflesecurity/trufflehog@main
        with:
          path: ./
          base: ${{ github.event.repository.default_branch }}
`;
```

### 4. Plugin Architecture
```typescript
// Plugin system for extensibility
export interface WaddlePlugin {
  name: string;
  version: string;
  description: string;
  author: string;
  license: string;
  
  // Lifecycle hooks
  onInstall?(context: PluginContext): Promise<void>;
  onUninstall?(context: PluginContext): Promise<void>;
  onEnable?(context: PluginContext): Promise<void>;
  onDisable?(context: PluginContext): Promise<void>;
  
  // Extension points
  commands?: Command[];
  eventHandlers?: EventHandler[];
  uiComponents?: UIComponent[];
  apiEndpoints?: APIEndpoint[];
  messageProcessors?: MessageProcessor[];
}

export class PluginManager {
  private plugins: Map<string, LoadedPlugin> = new Map();
  private sandboxes: Map<string, PluginSandbox> = new Map();
  
  async loadPlugin(manifest: PluginManifest): Promise<void> {
    // Validate manifest
    this.validateManifest(manifest);
    
    // Create sandbox
    const sandbox = new PluginSandbox({
      permissions: manifest.permissions,
      resources: {
        cpu: manifest.resources?.cpu || 100,
        memory: manifest.resources?.memory || 50 * 1024 * 1024, // 50MB
        storage: manifest.resources?.storage || 10 * 1024 * 1024 // 10MB
      }
    });
    
    // Load plugin code
    const plugin = await sandbox.loadPlugin(manifest.main);
    
    // Initialize plugin
    const context = this.createPluginContext(manifest);
    await plugin.onInstall?.(context);
    
    // Register plugin
    this.plugins.set(manifest.id, {
      manifest,
      instance: plugin,
      sandbox,
      context
    });
    
    // Register components
    this.registerCommands(manifest.id, plugin.commands || []);
    this.registerEventHandlers(manifest.id, plugin.eventHandlers || []);
    this.registerUIComponents(manifest.id, plugin.uiComponents || []);
    this.registerAPIEndpoints(manifest.id, plugin.apiEndpoints || []);
  }
  
  private createPluginContext(manifest: PluginManifest): PluginContext {
    return {
      // Plugin info
      plugin: {
        id: manifest.id,
        version: manifest.version,
        dataPath: `/plugins/${manifest.id}/data`
      },
      
      // APIs available to plugins
      api: {
        // Messaging
        sendMessage: this.createSandboxedAPI('sendMessage', manifest.permissions),
        editMessage: this.createSandboxedAPI('editMessage', manifest.permissions),
        deleteMessage: this.createSandboxedAPI('deleteMessage', manifest.permissions),
        
        // Channels
        getChannel: this.createSandboxedAPI('getChannel', manifest.permissions),
        listChannels: this.createSandboxedAPI('listChannels', manifest.permissions),
        
        // Users
        getUser: this.createSandboxedAPI('getUser', manifest.permissions),
        getCurrentUser: this.createSandboxedAPI('getCurrentUser', manifest.permissions),
        
        // Voice
        joinVoiceChannel: this.createSandboxedAPI('joinVoiceChannel', manifest.permissions),
        leaveVoiceChannel: this.createSandboxedAPI('leaveVoiceChannel', manifest.permissions),
        
        // Storage
        storage: new PluginStorage(manifest.id),
        
        // Events
        on: (event: string, handler: Function) => {
          this.registerEventHandler(manifest.id, event, handler);
        },
        
        // UI
        registerComponent: (component: UIComponent) => {
          this.registerUIComponent(manifest.id, component);
        }
      }
    };
  }
}

// Example plugin
export const EXAMPLE_PLUGIN = `
// plugins/welcome-bot/index.ts
import { WaddlePlugin, PluginContext } from '@waddle/plugin-api';

export default class WelcomeBot implements WaddlePlugin {
  name = 'Welcome Bot';
  version = '1.0.0';
  description = 'Automatically welcomes new members';
  author = 'Waddle Community';
  license = 'MIT';
  
  async onInstall(context: PluginContext) {
    // Initialize storage
    await context.api.storage.set('config', {
      welcomeMessage: 'Welcome to the waddle, {user}!',
      channel: 'general'
    });
  }
  
  eventHandlers = [
    {
      event: 'member.joined',
      handler: async (event: MemberJoinedEvent, context: PluginContext) => {
        const config = await context.api.storage.get('config');
        const message = config.welcomeMessage.replace('{user}', event.member.name);
        
        await context.api.sendMessage({
          channelId: config.channel,
          content: message,
          embed: {
            title: 'New Member!',
            description: \`Please welcome \${event.member.name} to our community!\`,
            color: 0x00ff00
          }
        });
      }
    }
  ];
  
  commands = [
    {
      name: 'welcome-config',
      description: 'Configure welcome messages',
      options: [
        {
          name: 'message',
          type: 'string',
          description: 'Welcome message template',
          required: false
        },
        {
          name: 'channel',
          type: 'channel',
          description: 'Channel to send welcome messages',
          required: false
        }
      ],
      execute: async (interaction: CommandInteraction, context: PluginContext) => {
        const config = await context.api.storage.get('config');
        
        if (interaction.options.message) {
          config.welcomeMessage = interaction.options.message;
        }
        
        if (interaction.options.channel) {
          config.channel = interaction.options.channel;
        }
        
        await context.api.storage.set('config', config);
        
        await interaction.reply({
          content: 'Welcome configuration updated!',
          ephemeral: true
        });
      }
    }
  ];
}

// plugins/welcome-bot/manifest.json
{
  "id": "welcome-bot",
  "name": "Welcome Bot",
  "version": "1.0.0",
  "description": "Automatically welcomes new members",
  "author": "Waddle Community",
  "license": "MIT",
  "main": "dist/index.js",
  "permissions": [
    "messages.send",
    "channels.read",
    "members.read"
  ],
  "resources": {
    "cpu": 50,
    "memory": 26214400,
    "storage": 1048576
  }
}
`;
```

### 5. Community Infrastructure
```typescript
// Community management tools
export class CommunityManager {
  private forums: DiscussionForums;
  private discord: DiscordIntegration;
  private metrics: CommunityMetrics;
  
  async setupCommunity(): Promise<void> {
    // Set up GitHub Discussions
    await this.setupGitHubDiscussions();
    
    // Set up Discord server
    await this.setupDiscordServer();
    
    // Set up contributor recognition
    await this.setupContributorRecognition();
    
    // Set up community metrics
    await this.setupMetrics();
  }
  
  private async setupGitHubDiscussions(): Promise<void> {
    const categories = [
      {
        name: 'Announcements',
        description: 'Official announcements from maintainers',
        emoji: 'ğŸ“£'
      },
      {
        name: 'General',
        description: 'General discussions about Waddle',
        emoji: 'ğŸ’¬'
      },
      {
        name: 'Ideas',
        description: 'Share ideas for new features',
        emoji: 'ğŸ’¡'
      },
      {
        name: 'Show and Tell',
        description: 'Show off your Waddle implementations',
        emoji: 'ğŸ‰'
      },
      {
        name: 'Help',
        description: 'Get help with Waddle',
        emoji: 'ğŸ™‹'
      }
    ];
    
    // Categories are created manually in GitHub
    console.log('GitHub Discussion categories:', categories);
  }
  
  private async setupDiscordServer(): Promise<void> {
    this.discord = new DiscordIntegration({
      channels: [
        { name: 'announcements', type: 'announcement' },
        { name: 'general', type: 'text' },
        { name: 'development', type: 'text' },
        { name: 'support', type: 'text' },
        { name: 'showcase', type: 'text' },
        { name: 'off-topic', type: 'text' },
        { name: 'voice-chat', type: 'voice' }
      ],
      roles: [
        { name: 'Maintainer', color: '#ff0000', permissions: ['ADMINISTRATOR'] },
        { name: 'Contributor', color: '#00ff00', permissions: ['SEND_MESSAGES'] },
        { name: 'Supporter', color: '#ffff00', permissions: ['SEND_MESSAGES'] }
      ],
      bots: [
        { name: 'WaddleBot', features: ['welcome', 'moderation', 'github'] }
      ]
    });
  }
}

// Governance model
export const GOVERNANCE = `
# Waddle Governance

## Decision Making

### Consensus Model

Waddle uses a consensus-seeking decision model:

1. **Proposal**: Anyone can propose changes via GitHub issues/discussions
2. **Discussion**: Community discusses for minimum 72 hours
3. **Consensus**: Maintainers seek rough consensus
4. **Decision**: Document decision and rationale

### Maintainer Responsibilities

- Review and merge pull requests
- Ensure code quality and security
- Guide project direction
- Foster inclusive community
- Resolve conflicts

### Becoming a Maintainer

Requirements:
- Consistent quality contributions (6+ months)
- Deep understanding of codebase
- Positive community interactions
- Nomination by existing maintainer
- Unanimous approval from maintainers

## Technical Steering Committee

For major decisions affecting project direction:

- Architecture changes
- Breaking API changes
- License changes
- Governance updates

Committee composition:
- 5 members
- 2-year terms
- Elected by maintainers

## Conflict Resolution

1. **Direct Communication**: Parties attempt resolution
2. **Mediation**: Neutral maintainer mediates
3. **Escalation**: Technical Steering Committee decides
4. **Last Resort**: Project founder has final say
`;

// Security policy
export const SECURITY_POLICY = `
# Security Policy

## Supported Versions

| Version | Supported          |
| ------- | ------------------ |
| 1.x.x   | :white_check_mark: |
| 0.x.x   | :x:                |

## Reporting a Vulnerability

### Private Disclosure

For security vulnerabilities, please DO NOT open a public issue.

Email: security@waddle.chat

Include:
- Vulnerability description
- Steps to reproduce
- Potential impact
- Suggested fix (if any)

### Response Timeline

- **Acknowledgment**: Within 48 hours
- **Initial Assessment**: Within 1 week
- **Fix Timeline**: Depends on severity
  - Critical: 24-48 hours
  - High: 1 week
  - Medium: 2-4 weeks
  - Low: Next release

### Disclosure Policy

- 90-day disclosure deadline
- Earlier if fix is released
- Credit given to reporters
- CVE assignment for qualifying issues

## Security Practices

### Code Review

- All code requires review
- Security-sensitive changes need 2 reviews
- Automated security scanning

### Dependencies

- Regular dependency updates
- Automated vulnerability scanning
- Minimal dependency principle

### Authentication & Authorization

- JWT tokens with short expiration
- Rate limiting on all endpoints
- Input validation and sanitization

### Data Protection

- Encryption at rest and in transit
- PII handling guidelines
- GDPR compliance

## Bug Bounty Program

Coming soon! We plan to launch a bug bounty program to reward security researchers.
`;
```

### 6. Launch Checklist
```typescript
// Open source launch checklist
export const LAUNCH_CHECKLIST = `
# Open Source Launch Checklist

## Legal
- [ ] Choose license (MIT recommended)
- [ ] Add LICENSE file
- [ ] Add copyright headers to all files
- [ ] Review and remove any proprietary code
- [ ] Check dependencies for license compatibility
- [ ] Set up CLA (Contributor License Agreement)

## Documentation
- [ ] Complete README.md
- [ ] API documentation
- [ ] Architecture documentation
- [ ] Getting started guide
- [ ] Deployment guide
- [ ] Contributing guide
- [ ] Code of Conduct

## Code Quality
- [ ] Remove all secrets/credentials
- [ ] Add .env.example
- [ ] Clean up TODO comments
- [ ] Add comprehensive tests
- [ ] Set up CI/CD pipeline
- [ ] Configure linting/formatting

## Community
- [ ] Create GitHub organization
- [ ] Set up issue templates
- [ ] Set up PR template
- [ ] Create Discord/Slack
- [ ] Plan launch announcement
- [ ] Prepare social media

## Infrastructure
- [ ] Set up demo instance
- [ ] Configure Docker images
- [ ] Publish to package registries
- [ ] Set up documentation site
- [ ] Configure analytics

## Security
- [ ] Security audit
- [ ] Set up security policy
- [ ] Configure Dependabot
- [ ] Set up CodeQL scanning
- [ ] Review permissions

## Launch
- [ ] Soft launch to beta testers
- [ ] Gather feedback
- [ ] Address critical issues
- [ ] Public announcement
- [ ] Submit to directories
- [ ] Engage with community
`;

// Community metrics dashboard
export function CommunityDashboard() {
  const [metrics, setMetrics] = useState<CommunityMetrics>();
  
  useEffect(() => {
    loadMetrics();
  }, []);
  
  const loadMetrics = async () => {
    const data = await api.getCommunityMetrics();
    setMetrics(data);
  };
  
  if (!metrics) return <LoadingSpinner />;
  
  return (
    <div className="community-dashboard">
      <h1>Community Metrics</h1>
      
      <div className="metrics-grid">
        <MetricCard
          title="Contributors"
          value={metrics.contributors.total}
          change={metrics.contributors.newThisMonth}
          icon={<UsersIcon />}
        />
        
        <MetricCard
          title="Pull Requests"
          value={metrics.pullRequests.open}
          subtitle={`${metrics.pullRequests.mergedThisMonth} merged this month`}
          icon={<GitPullRequestIcon />}
        />
        
        <MetricCard
          title="Issues"
          value={metrics.issues.open}
          subtitle={`${metrics.issues.closedThisMonth} closed this month`}
          icon={<GitIssueIcon />}
        />
        
        <MetricCard
          title="Stars"
          value={metrics.stars.total}
          change={metrics.stars.newThisWeek}
          icon={<StarIcon />}
        />
      </div>
      
      <div className="contributor-spotlight">
        <h2>Top Contributors This Month</h2>
        <ContributorList contributors={metrics.topContributors} />
      </div>
      
      <div className="activity-chart">
        <h2>Community Activity</h2>
        <ActivityChart data={metrics.activityTimeline} />
      </div>
    </div>
  );
}
```

## Dependencies
- GitHub for hosting and collaboration
- Discord for community communication
- Documentation site generator (Docusaurus)
- CI/CD tools (GitHub Actions)
- Security scanning tools

## Estimated Effort
**5 days**
- 1 day: Documentation and guides
- 1 day: CI/CD and automation setup
- 1 day: Plugin architecture
- 1 day: Community infrastructure
- 1 day: Security audit and launch prep

## Notes
- Start with soft launch to gather feedback
- Focus on developer experience
- Build community gradually
- Regular engagement important
- Plan for long-term maintenance