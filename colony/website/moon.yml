id: colony-website

language: typescript

fileGroups:
  sources:
    - "src/**/*"

tasks:
  build:
    command: "bun run build"
    options:
      runInCI: true
      outputStyle: stream

  dev:
    command: "bun run dev"
    options:
      persistent: true
      runInCI: false

  preview:
    command: "bunx wrangler dev --config wrangler.jsonc"
    options:
      runInCI: false

  deploy-preview:
    command: "bunx wrangler versions upload --config wrangler.jsonc"
    deps:
      - "~:build"
    options:
      runInCI: true

  deploy-production:
    command: "bunx wrangler deploy --config wrangler.jsonc --env production"
    deps:
      - "~:build"
    options:
      runInCI: true

