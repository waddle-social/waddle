# =============================================================================
# ALERTMANAGER CONFIGURATION SECRET - EXAMPLE
# =============================================================================
#
# This file is an EXAMPLE. Do NOT commit actual credentials to git.
#
# To deploy:
# 1. Copy this file and replace placeholders with actual values
# 2. Create secret:
#    kubectl create secret generic alertmanager-config \
#      --from-file=alertmanager.yaml=alertmanager-config.yaml \
#      -n observability
#
# =============================================================================
#
# Example alertmanager.yaml content:
#
# global:
#   resolve_timeout: 5m
#   slack_api_url: 'https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX'
#   smtp_smarthost: 'smtp.gmail.com:587'
#   smtp_from: 'alerts@waddle.social'
#   smtp_auth_username: 'alerts@waddle.social'
#   smtp_auth_password: '<app-password>'
#
# route:
#   group_by: ['alertname', 'namespace']
#   group_wait: 30s
#   group_interval: 5m
#   repeat_interval: 4h
#   receiver: 'slack-default'
#   routes:
#     - match:
#         severity: critical
#       receiver: 'pagerduty-critical'
#       continue: true
#     - match:
#         severity: critical
#       receiver: 'slack-critical'
#     - match:
#         severity: warning
#       receiver: 'slack-warnings'
#     - match:
#         severity: info
#       receiver: 'slack-info'
#
# receivers:
#   - name: 'slack-default'
#     slack_configs:
#       - channel: '#alerts-default'
#         send_resolved: true
#         title: '{{ .Status | toUpper }}: {{ .CommonAnnotations.summary }}'
#         text: '{{ range .Alerts }}*Alert:* {{ .Annotations.summary }}
# *Severity:* {{ .Labels.severity }}
# *Namespace:* {{ .Labels.namespace }}
# *Description:* {{ .Annotations.description }}
# *Runbook:* {{ .Annotations.runbook_url }}
# {{ end }}'
#
#   - name: 'slack-critical'
#     slack_configs:
#       - channel: '#alerts-critical'
#         send_resolved: true
#
#   - name: 'slack-warnings'
#     slack_configs:
#       - channel: '#alerts-warnings'
#         send_resolved: true
#
#   - name: 'slack-info'
#     slack_configs:
#       - channel: '#alerts-info'
#         send_resolved: true
#
#   - name: 'pagerduty-critical'
#     pagerduty_configs:
#       - service_key: '<pagerduty-integration-key>'
#         severity: critical
#
#   - name: 'email-digest'
#     email_configs:
#       - to: 'team@waddle.social'
#         send_resolved: true
#
# inhibit_rules:
#   # Inhibit warnings when critical is firing for same alertname
#   - source_match:
#       severity: 'critical'
#     target_match:
#       severity: 'warning'
#     equal: ['alertname', 'namespace']
#
#   # Inhibit info when warning is firing for same alertname
#   - source_match:
#       severity: 'warning'
#     target_match:
#       severity: 'info'
#     equal: ['alertname', 'namespace']
#
# =============================================================================
---
apiVersion: v1
kind: Secret
metadata:
  name: alertmanager-config-example
  namespace: observability
  labels:
    app.kubernetes.io/part-of: observability
    app.kubernetes.io/component: alertmanager
type: Opaque
stringData:
  alertmanager.yaml: |
    # REPLACE WITH ACTUAL CONFIGURATION
    # See comments above for full example
    global:
      resolve_timeout: 5m
    route:
      receiver: 'null'
    receivers:
      - name: 'null'
